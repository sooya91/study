# ----- Day01 -----

# 1. 블록체인의 이해

- Nexledger 소개
- 사례 소개
  - 은행연합회 '공동인증' (서비스), 뱅크사인
  - DID(Distributed ID)



# 2. 블록체인 동작원리

## 1) 블록체인의 정의

- 디지털 장부
- 데이터 위변조 방지 기술
- 탈중앙화된 네트워크이자 데이터베이스
  - Trust-Zone을 구축하여 도입할 수 있다.

### - Distributed Ledger

- Public: 익명의 사용자
- Private: 사용자의 인증이 필요하다.(CA)

### - Blockchain 발전단계

- 1.0: Digital Currenc
- 2.0: Smart Contract
  - 이더리움과 함께 시작
  - 거래나 계약을 위해 디지털화된 문서/정보로만 활용이 가능하다.
- 3.0: DAG(Direct Acyclic Graph)
  - IOTA?
  - DAG는 [위상정렬](https://ko.wikipedia.org/wiki/위상정렬)이 있는 유향 그래프

![DAG of Blocks Structure](https://thumbor.forbes.com/thumbor/960x0/https%3A%2F%2Fblogs-images.forbes.com%2Fshermanlee%2Ffiles%2F2018%2F01%2F2018-01-17-10.07.47.jpg)

DAG of Blocks Structure

<https://www.forbes.com/sites/shermanlee/2018/01/22/explaining-directed-acylic-graph-dag-the-real-blockchain-3-0/#779aadba180b>



### - Ethereum 로드맵

1. Frontier
2. Homestead
   - DAO 공격으로 1,920,000번쨰 블록에서 하드포크
3. Metropolis
   - 난이도 조절, 보상 ETH 변경, EVM OPCODE 추가 및 성능개선
4. Serenity
   - PoS 전환
   - 라이덴 네트워크, 샤딩, 플라즈마 기술 적용

### - DAG

- 비순환 그래프
- 블록 개념이 없는 높은 트랜잭션 처리 속도
- 저렴한 수수료 - 채굴자가 없음
- 현재 한계: Double Spending을 막을 수 없다.

### - 블록체인 장단점

- 장점
  - 해킹이 불가능
  - 비싼 데이터센터를 쓸필요없어 시스템 저장비용 적음
  - 별도 검증기구 없이 금융거래 신뢰성 보장
  - 특정 거래를 수정할 수 없음
- 단점
  - 승인 시간이 길어질 수 있음
  - 거래 지연
  - 특정 거래를 수정할 수 없음



## 2) 블록체인 구조

### - 구성요소

- 거래, 블록, 블록체인 노드, 블록체인 네트워크



## 3) 네트워크와 노드

### - 블록체인 노드

- 풀노드
  - Wallet, Miner, Full Blockchain, Network Routing 기능 모두를 가짐
- Wallet Node
- Miner Node
  - 작업증명 알고리즘(PoW)을 이용하여 새로운 블록 생성
- Full Blcokchain Node
- Network Routing Node
  - 네트워크 내 라우팅 기능, 노드들간의 연결유지
- Light Weight Node
  - 외부 노드의 참조가 필요한 노드



## 4) 키, 주소, 지갑

### - Address

- 1로 시작됨(Mainnet)(P2PKH주소)
- Pubkey를 이용하여 160bit 해싱
- Base58Check encoding을 사용
- 끝에 checksum(4byte)을 추가
- Public Hash값을 BASE58 인코딩을 거친 주소(길이 가변적 29~35 byte)

> base58 포맷 사용 이유?
>
> +, /, 0(숫자), O(대문자), I(대문자), L(대문자) 의 6개 문자가 빠진 58문자
>
> 서로 닮아 헷갈리기 쉽고 옮겨 적을 때 틀릴 수 있어서

### - Wallet

- private key, public key, address
- ECC(타원 곡선 암호화): 공개키 암호방식

#### - 지갑의 종류

1. 비결정적/결정적 지갑
2. 계층결정적 지갑(HD Wallet)
   - BIP0032 계층 결정적 지갑
   - 거래가 발생할 때마다 지갑의 주소가 새로 생성되는 지갑
   - Seed를 이용하여 HD Wallet을 생성
     - Seed에서 마스터키를 생성한 후 이 키를 이용하여 자식키를 생성
     - Tree 구조에서 생성된 키를 담고 있음
   - Child key 유도
   - 확장키
   - 공개 자식키 유도
   - 단절된 자식키 유도(단절 유도법)
3. Multisig 용 Wallet
   - Pay-to-Script Hash(P2SH) 주소
   - 3으로 시작
   - BIP0016으로 정의됨



## 5) 거래 구조, 생성 및 전파

### - Transaction

- 입력값이라고 불리는 자금원에서 출력값으로 불리는 목적지까지의 가치전송을 인코딩하는 데이터 구조.

- UTXO라는 소비 가능한 출력값을 생성

- 코인베이스 측면에서 본다면 출력값이 먼저이다.

- UTXO는 일회용이다. (일회성 토큰)

#### - 거래 구조

- 거래 입력값
  - 거래 해시와 일련번호
    - UTXO의 pointer 역할을 함.
    - UTXO가 블록체인 내에 기록되는 경우 해당 거래의 hash와 index를 참조하여 UTXO를 지정함.
  - 해제스크립트
    - 해제 스크립트는 개인키로부터 생성된 서명을 담고 있고 ScriptSig라고 부름
- 거래 출력값
  - 모든 거래는 출력값을 생성하며, 이는 블록체인 장부에 기록된다.
    - 출력값은 UTXO라는 소비 가능한 형태로 기록
  - 잠금스크립트
    - 공개키 혹은 주소가 담겨있기 때문에 Scriptpubkey라고 부름
    - 공개키 암호화방식

> Nexledger.N 에서는 script size는 빠짐.

- 거래의 종류
  - OP_RETURN :
  - smart contract 에 실습시 OP_RETRUN 에 반영

- Memory pool : block 화 되기전 저장하는 곳
  - 빠르게 거래 및 블럭을 만들기 위한 구조 중 하나

### - 정리
- Wallet 
### - CoinBase
 




우리팀

- 강득수
- 조성주
- 안창일
- 이상욱
- 황보영
